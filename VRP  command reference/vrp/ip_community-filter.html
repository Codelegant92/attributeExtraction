
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="zh-cn" xml:lang="zh-cn">
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=GB2312">
   
<meta http-equiv="Content-Type" content="text/html; charset=GB2312">
<meta name="copyright" content="(C) 版权 2005">
<meta name="DC.rights.owner" content="(C) 版权 2005">
<meta name="DC.Type" content="cliref">
<meta name="DC.Title" content="ip community-filter">
<meta name="DC.Relation" scheme="URI" content="../vrp/bgp_configuration_commands.html">
<meta name="DC.Relation" scheme="URI" content="display_ip_community-filter.html">
<meta name="DC.Format" content="XHTML">
<meta name="DC.Identifier" content="ip_community-filter">
<meta name="DC.Language" content="zh-cn">
<link rel="stylesheet" type="text/css" href="../public_sys-resources/commonltr.css">
<script language="javascript" type="text/javascript" src="../public_sys-resources/ExpandCollapse.js"></script><title>ip community-filter</title>
</head>
<body style="clear:both; padding-left:10px; padding-top:5px; padding-right:5px; padding-bottom:5px"><a name="ip_community-filter"></a><a name="ip_community-filter"></a>


<h1 class="topictitle1">ip community-filter</h1>

<div>
<div class="clifunc"><h2 class="sectiontitle">命令功能</h2>
<div class="clifuncbody"><p><strong>ip community-filter</strong>命令用来增加一个团体属性过滤器（表项）。</p>
<p><strong>undo ip community-filter</strong>命令用来删除团体属性过滤器（表项）。</p>
</div></div>

<div class="cliformat"><h2 class="sectiontitle">命令格式</h2>
<div class="cliformatbody"><p><strong>ip community-filter</strong> { <strong>basic</strong> <em>comm-filter-name</em> { <strong>permit</strong> | <strong>deny</strong> } [ <em>community-number</em> | <em>aa:nn</em> ] * &amp;&lt;1-9&gt; | <em>basic-comm-filter-num</em> { <strong>permit</strong> | <strong>deny</strong> } [ <em>community-number</em> | <em>aa:nn</em> ] * &amp;&lt;1-16&gt; } [ <strong>internet</strong> | <strong>no-export-subconfed</strong> | <strong>no-advertise</strong> | <strong>no-export</strong> ] *</p>
<p><strong>ip community-filter</strong> { <strong>advanced</strong> <em>comm-filter-name</em> | <em>adv-comm-filter-num</em> } { <strong>permit</strong> | <strong>deny</strong> } <em>regular-expression</em></p>
<p><strong>undo ip community-filter</strong> { <strong>basic</strong> <em>comm-filter-name</em> [ <em>community-number</em> | <em>aa:nn</em> ]* &amp;&lt;1-9&gt; | <em>basic-comm-filter-num</em> [ <em>community-number</em> | <em>aa:nn</em> ] * &amp;&lt;1-16&gt; } [ <strong>internet</strong> | <strong>no-export-subconfed</strong> | <strong>no-advertise</strong> | <strong>no-export</strong> ] *</p>
<p><strong>undo ip community-filter</strong> { <strong>advanced</strong> <em>comm-filter-name</em> | <em>adv-comm-filter-num</em> } [ <em>regular-expression</em> ]</p>
</div></div>

<div class="cliparam"><h2 class="sectiontitle">参数说明</h2>
<div class="cliparambody"><p><strong>basic</strong> <em>comm-filter-name</em>：指定基本团体属性过滤器名称。字符串形式，取值范围是1～51个字符，且不能都是数字。</p>
<p><em>basic-comm-filter-num</em>：基本团体属性过滤器号。整数形式，取值范围1～99。</p>
<p><strong>deny</strong>：指定团体属性过滤器的匹配模式为拒绝。</p>
<p><strong>permit</strong>：指定团体属性过滤器的匹配模式为允许。</p>
<p><em>community-number</em>：指定团体号。整数形式，取值范围0～4294967295。</p>
<p><em>aa:nn</em>：指定团体号。<em>aa</em>和<em>nn</em>都是整数形式，取值范围都是0～65535。</p>
<ul>
<li><p>如果配置的团体名称是<em>basic-comm-filter-num</em>类型，则<em>community-number</em>和aa:nn一共可以指定16个；</p>
</li>
<li><p>如果配置的团体名称是<strong>basic</strong> <em>comm-filter-name</em>类型，则<em>community-numbe</em>r和aa:nn一共可以指定9个；</p>
</li>
<li><p>实际产品上支持的个数有所不同。</p>
</li>
</ul>
<p><strong>internet</strong>：可以向任何对等体发送匹配的路由。</p>
<p><strong>no-export-subconfed</strong>：不向自治系统外部通告路由，如果使用了联盟，则不会向联盟中的其他子自治系统通告路由。</p>
<p><strong>no-advertise</strong>：不通告给其他对等体。</p>
<p><strong>no-export</strong>：不向自治系统外部通告路由，如果使用了联盟，则不向联盟外部通告路由，但会通告给联盟中的其他子自治系统。</p>
<p><strong>advanced</strong> <em>comm-filter-name</em>：指定高级团体属性过滤器名称。字符串形式，取值范围是1～51个字符，且不能都是数字。</p>
<p><em>adv-comm-filter-num</em>：高级团体属性过滤器号。整数形式，取值范围100～199。</p>
<p><em>regular-expression</em>：指定AS路径正则表达式。</p>
</div></div>

<div class="cliview"><h2 class="sectiontitle">视图</h2>
<div class="cliviewbody"><p>系统视图</p>
</div></div>

<div class="clidefaultlevel"><h2 class="sectiontitle">缺省级别</h2>
<div class="clidefaultlevelbody"><p>2：配置级</p>
</div></div>

<div class="clidesc"><h2 class="sectiontitle">使用指南</h2>
<div class="clidescbody"><p>在基本团体属性过滤器只能指定团体号或知名团体属性，在高级团体属性过滤器中则可以指定正则表达式作为匹配条件。</p>
<ul>
<li><p>配置基本团体属性过滤器可通过命令<strong>ip community-filter</strong> <strong>basic</strong> <em>comm-filter-name</em>或命令<strong>ip community-filter</strong> <em>basic-comm-filter-num</em>进行配置。前者可以指定基本团体属性过滤器的名称，但名称必须包含非数字字符。一次可以配置9个团体号。后者只能配置过滤器号是1~99的基本团体属性。一次可以配置16个团体号。</p>
</li>
<li><p>配置高级团体属性过滤器可通过命令<strong>ip community-filter</strong> <strong>advanced</strong> <em>comm-filter-name</em>或命令<strong>ip community-filter</strong> <em>adv-comm-filter-num</em>进行配置。前者可以指定高级团体属性过滤器的名称，但名称必须包含非数字字符。后者只能配置过滤器号是100~199的高级团体属性。</p>
</li>
</ul>
<p>在Route-Policy中用命令<strong>apply comm-filter delete</strong>删除团体属性过滤器值的时候，所引用的<strong>ip community-filter</strong>命令每条只能包含一个团体属性，如果要删除多个团体属性，则可通过配置多条命令来解决。如果在同一个过滤器号下配置了多个团体属性，则这几个属性都无法删除。举例请参见<strong>apply comm-filter delete</strong>。</p>
<p>配置了团体属性过滤器后，缺省情况下，RM会立即通知各个协议应用该过滤器进行过滤。如果需要延迟过滤器的生效时间，需使用命令<strong>route-policy-change notify-delay</strong>配置延迟生效时间。</p>
</div></div>

<div class="dropdowncollapse"><div class="dropdowntitle" onclick="ExpandorCollapseNode(this)"><a name="ip_community-filter__d83661e308"></a><a name="d83661e308"></a><h2 class="sectiontitle">使用实例</h2></div>
<div class="dropdowncontext"><div class="cliexamplebody"><p># 配置序号为1的基本团体属性过滤器。</p>
<pre class="screen">&lt;Quidway&gt;<strong> system-view</strong></pre>
<pre class="screen">[Quidway]<strong> ip community-filter 1 permit internet</strong></pre>
<p># 配置序号为100的高级团体属性过滤器。</p>
<pre class="screen">&lt;Quidway&gt;<strong> system-view</strong></pre>
<pre class="screen">[Quidway]<strong> ip community-filter 100 permit ^10</strong></pre>
</div></div></div>

</div>

<div>
<div class="familylinks">
<div class="parentlink"><strong>父主题：</strong> <a href="../vrp/bgp_configuration_commands.html">BGP配置命令</a></div>
</div>
<div class="relinfo"><strong>相关主题</strong><br>
<div><a href="display_ip_community-filter.html">display ip community-filter</a></div>
</div>
</div>

<div class="hrcopyright"><hr size="2"></div><div class="hwcopyright">华为所有和机密</div><div class="hwcopyright">版权所有 &copy; 华为技术有限公司</div></body>
</html>